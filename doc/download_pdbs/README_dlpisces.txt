---
   This file contains more details about how to use "dlpisces.py".

--- Overview ---
When attempting to ask statistical questions about proteins, 
it is preferable to use an unbiased sample of PDB files.  Unfortunately,
the raw PDB library contains many redundant and similar PDB structures,
which can weight the statistics towards proteins which are easy to crystallize
(or heavily studied proteins with many artificial mutant variants).

    The dlpisces.py script downloads a "representative sample" of the entire 
PDB library (using the filtering method provided by the PISCES server).
The PISCES server attempts to remove most of this bias.

Typical usage (example):

    dlpisces.py < cullpdb_pc40_res2.5_R1.0_d090206_chains9151

This program downloads a list of PDB files (and chains) generated by the
PISCES server at:
  http://dunbrack.fccc.edu/PISCES.php
  http://dunbrack.fccc.edu/Guoli/pisces_download.php
The lists of PDB files provided by the server contain non-redundant subsets of 
all the PDB files in the rcsb repository whose resolution (in Angstroms) 
and R-values lie below some desired threshold.  
Users can select from or requests different lists of PDB files,
correspond to different levels of tolerable sequence homology, as 
well as different tolerated cutoffs for resolution and R-values,
and other criteria.

Before running the "dlpisces.py" script, the user must manually go to this web
site and obtain a "cullpdb" file.  Any file will do as long as it has the
following format.  (excerpt below)
"cullpdb_pc40_res2.5_R1.0_d090206_chains9151"
 -----------------------
IDs         length Exptl.  resolution  R-factor FreeRvalue
7ODCA       424  XRAY        1.600    0.20    0.23
2AXPA       173  XRAY        2.500    0.26    0.29
2VKEA       207  XRAY        1.620    0.25    0.30
1IHJA        98  XRAY        1.800    0.22    0.24
2NUTC       196  XRAY        2.300    0.22    0.27
1DQTA       117  XRAY        2.000    0.23    0.25

Every line in this file (other than the comment line at the beginning)
begins with a 4-letter pdb identifier, immediately followed by a 1-letter
chain identifier.  (Thus it's possible for the same 4-letter PDB indentifier
to appear twice in this list, with different chains.)

For every line in the "cullpdb" file, this script
a) downloads a the relevant file in gzipped format, for example
   7odc.pdb.gz
b) unzips the file
c) extracts the relevant chain from the pdb file and creates a new pdb file:
   7odc_chainA.pdb
d) This script also attempts to download the corresponding dssp file from 
   ftp.cmbi.kun.nl/pub/molbio/data/dssp
   (These DSSP files can be useful for older PDB files which lack secondary
    structure information.  However in most cases, they are not needed.)

This script keeps track of which files have been downloaded so far
so that you can run it again without having to delete your old PDB files.
The following files keep track of this information:

pdb_files.txt       This stores a list of names of PDB files created by
                    dlpisces.py which contain only the chains referred to
                    in the "cullpdb" file downloaded from the pisces server.
                    THESE ARE THE PDB FILES YOU WOULD PASS TO OTHER SCRIPTS
                    WHICH ANALYZE STATISTICAL PATTERNS IN THE PDB DATABASE.
                    THESE FILES CONTAIN A "REPRESENTATIVE SAMPLE" OF THE 
                    CHAINS IN THE PDB LIBRARY.  
                    (You may need to use use other criteria to further
                    refine the list of pdb files you want, but this is
                    a good starting point.)
pdbs_most_recent.txt This is a list of PDB files (4-letter codes) which were
                     successfully downloaded the most recent time you ran
                     dlpisces.py.  Only the 4-letter codes are kept.
pdbs_old.txt        A list of PDB files which were downloaded in the current
                    attempt using dlpisces.py, as well as all earlier attempts.
                    (This file grows each time dlpisces.py is run.
                     It may include older PDB files which are not mentioned
		     in the current "cullpdb" file from the pisces server.
                     Only the 4-letter codes are kept.)
pdbs_not_needed.txt Files which were downloaded earlier, but are not
                    mentined in the current "cullpdb" file go here.
                    These are old PDB files not currently needed.  You can keep
                    them (in case you might need them later), or delete them.
                    (Only the 4-letter codes are kept.)

If this script gets interrupted before completing, you can safely run it again.

(It's a good idea to delete the *_chain*.pdb files first, as in this example:
  rm -f *_chain*.pdb
  dlpisces.py < cullpdb_pc30_res1.6_R0.25_d120723_chains2924
This will continue downloading from where it left off.
Again, the name of your "cullpdb_" file will probably be different.)

